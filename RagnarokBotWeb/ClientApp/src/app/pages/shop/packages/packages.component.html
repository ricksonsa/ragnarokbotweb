<div class="main">
  <ng-template #totalTemplate>
    <p nz-typography style="margin: 0">{{total}} total packages</p>
  </ng-template>
  <ng-template #newPack>
    <nz-space>
      <nz-input-group *nzSpaceItem [nzSuffix]="suffixIconSearch">
        <input type="text" nz-input placeholder="input search text" [formControl]="searchControl" />
      </nz-input-group>
      <ng-template #suffixIconSearch>
        <nz-icon nzType="search" />
      </ng-template>

      <button *nzSpaceItem [routerLink]="['new']" nz-button nzType="primary">
        <nz-icon nzType="plus" style="color: #fff;" nzTheme="outline" />
        New Package
      </button>
    </nz-space>
  </ng-template>
  <nz-card nzTitle="Packages" [nzExtra]="newPack">
    <nz-table nzSize="small" #basicTable [nzData]="suggestions$ | async" [nzFrontPagination]="false" nzShowSizeChanger [nzShowTotal]="totalTemplate"
      [nzTotal]="total" [nzPageSize]="pageSize" [nzPageIndex]="pageIndex" (nzPageIndexChange)="pageIndexChange($event)"
      [nzLoading]="isLoading" (nzPageSizeChange)="pageSizeChange($event)">
      <thead>
        <tr>
          <th>Id</th>
          <th>Name</th>
          <th>Description</th>
          <th>Enabled</th>
          <th>Raid Blocked</th>
          <th>Discord Channel</th>
          <th>VIP Only</th>
          <th>Price</th>
          <th>VIP Price</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of basicTable.data">
          <td>{{data.id}}</td>
          <td>{{data.name}}</td>
          <td>{{data.description}}</td>
          <td><nz-icon [nzType]="data.enabled ? 'check' : 'close'" nz-popover
              [nzPopoverContent]="data.enabled ? 'Yes' : 'No'"
              [ngClass]="{ 'success': data.enabled, 'danger': !data.enabled}"></nz-icon>
          </td>

          <td><nz-icon [nzType]="data.isBlockPurchaseRaidTime ? 'check' : 'close'" nz-popover
              [nzPopoverContent]="data.isBlockPurchaseRaidTime ? 'Yes' : 'No'"
              [ngClass]="{ 'success': data.isBlockPurchaseRaidTime, 'danger': !data.isBlockPurchaseRaidTime}"></nz-icon>
          </td>

          <td>{{getDiscordName(data.discordChannelId)}}</td>

          <td><nz-icon [nzType]="data.isVipOnly ? 'check' : 'close'" nz-popover
              [nzPopoverContent]="data.isVipOnly ? 'Yes' : 'No'"
              [ngClass]="{ 'success': data.isVipOnly, 'danger': !data.isVipOnly}"></nz-icon>
          </td>

          <td>{{data.price}}</td>
          <td>{{data.vipPrice}}</td>
          <td>
            <a [routerLink]="[data.id]">
              <nz-icon nzType="edit"></nz-icon>
              Edit
            </a>
            <nz-divider nzType="vertical"></nz-divider>
            <button nz-popconfirm nz-button nzType="link" nzDanger="true"
              nzPopconfirmTitle="Are you sure you want to delete this item?" (nzOnConfirm)="confirmDelete(data.id)"
              (nzOnCancel)="cancelDelete()" nzPopconfirmPlacement="topLeft" [nzOkText]="'Yes'" nzCancelText="No"
              [nzOkDanger]="true">
              <nz-icon nzType="delete"></nz-icon>
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </nz-table>
  </nz-card>
</div>